ADD_TEST("VTKEMATLASBRAINCLASSIFIER.TestSegmentation" 
"${SLICER_EXECUTABLE}" "${CMAKE_CURRENT_SOURCE_DIR}/../TestOutAndInput/EMAtlasBrainClassifier.xml" "--no-tkcon" "--exec EMAtlasBrainClassifier_BatchMode")

SET_TESTS_PROPERTIES("VTKEMATLASBRAINCLASSIFIER.TestSegmentation" PROPERTIES FAIL_REGULAR_EXPRESSION "ERROR;FAIL;Test failed")
SET_TESTS_PROPERTIES("VTKEMATLASBRAINCLASSIFIER.TestSegmentation" PROPERTIES PASS_REGULAR_EXPRESSION "Test passed")

SET(TCL_TESTS
  TestEMAtlasBrainClassifier	
   )

FOREACH(tclfile ${TCL_TESTS})
ADD_TEST("VTKEMATLASBRAINCLASSIFIER.CompareResult"			
  "${CTEST_SLICER_HOME}/Scripts/runvnc" "--Xvnc"
  "${CTEST_XVNC_EXECUTABLE}" "-d" "44" "--not-secure" "--" 
  "${SLICER_EXECUTABLE}" "--agree_to_license"		
  "${CTEST_SLICER_HOME}/Scripts/ImageRegressionTest.tcl" "${CMAKE_CURRENT_SOURCE_DIR}/TestEMAtlasBrainClassifier.tcl"
   "-D" "${CMAKE_CURRENT_SOURCE_DIR}")

   SET_TESTS_PROPERTIES("VTKEMATLASBRAINCLASSIFIER.CompareResult" PROPERTIES FAIL_REGULAR_EXPRESSION "ERROR;FAIL;Test failed")
   SET_TESTS_PROPERTIES("VTKEMATLASBRAINCLASSIFIER.CompareResult" PROPERTIES PASS_REGULAR_EXPRESSION "Test passed")
ENDFOREACH(tclfile)